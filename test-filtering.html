<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Text-to-Speech Filtering Test</title>
    <style>
        body { font-family: Arial, sans-serif; padding: 20px; }
        .test-section { margin: 20px 0; padding: 15px; border: 1px solid #ccc; border-radius: 5px; }
        button { padding: 10px 20px; margin: 5px; background: #007bff; color: white; border: none; border-radius: 3px; cursor: pointer; }
        button:hover { background: #0056b3; }
        .original { background: #f8f9fa; padding: 10px; margin: 10px 0; }
        .cleaned { background: #e8f5e8; padding: 10px; margin: 10px 0; }
    </style>
</head>
<body>
    <h1>Text-to-Speech Filtering Test</h1>
    
    <div class="test-section">
        <h3>Test 1: Emojis and Symbols</h3>
        <div class="original">
            <strong>Original:</strong> Hello! ğŸ‘‹ How are you? ğŸ‰ I'm doing great! ğŸ“Š The data shows 100% success! âœ…
        </div>
        <div class="cleaned" id="cleaned1"></div>
        <button onclick="testFiltering('Hello! ğŸ‘‹ How are you? ğŸ‰ I\'m doing great! ğŸ“Š The data shows 100% success! âœ…', 'cleaned1')">Test Filtering</button>
        <button onclick="speakText('Hello! ğŸ‘‹ How are you? ğŸ‰ I\'m doing great! ğŸ“Š The data shows 100% success! âœ…')">Speak Original</button>
    </div>

    <div class="test-section">
        <h3>Test 2: Technical Symbols</h3>
        <div class="original">
            <strong>Original:</strong> The formula is: âˆ‘(xÂ²) = âˆ and the angle âˆ ABC = 90Â° â†’ Result: âœ…
        </div>
        <div class="cleaned" id="cleaned2"></div>
        <button onclick="testFiltering('The formula is: âˆ‘(xÂ²) = âˆ and the angle âˆ ABC = 90Â° â†’ Result: âœ…', 'cleaned2')">Test Filtering</button>
        <button onclick="speakText('The formula is: âˆ‘(xÂ²) = âˆ and the angle âˆ ABC = 90Â° â†’ Result: âœ…')">Speak Original</button>
    </div>

    <div class="test-section">
        <h3>Test 3: Mixed Content</h3>
        <div class="original">
            <strong>Original:</strong> Welcome to SpeakGenie! ğŸš€ Get started with our AI-powered learning platform ğŸ“š. Features include: ğŸ¯ Voice recognition, ğŸ§ Audio playback, and ğŸ“Š Progress tracking.
        </div>
        <div class="cleaned" id="cleaned3"></div>
        <button onclick="testFiltering('Welcome to SpeakGenie! ğŸš€ Get started with our AI-powered learning platform ğŸ“š. Features include: ğŸ¯ Voice recognition, ğŸ§ Audio playback, and ğŸ“Š Progress tracking.', 'cleaned3')">Test Filtering</button>
        <button onclick="speakText('Welcome to SpeakGenie! ğŸš€ Get started with our AI-powered learning platform ğŸ“š. Features include: ğŸ¯ Voice recognition, ğŸ§ Audio playback, and ğŸ“Š Progress tracking.')">Speak Original</button>
    </div>

    <script>
        // Copy the cleanTextForSpeech function from the TypeScript service
        function cleanTextForSpeech(text) {
            return text
                // Remove all emojis and emoticons
                .replace(/[\u{1F600}-\u{1F64F}]|[\u{1F300}-\u{1F5FF}]|[\u{1F680}-\u{1F6FF}]|[\u{1F1E0}-\u{1F1FF}]|[\u{2600}-\u{26FF}]|[\u{2700}-\u{27BF}]|[\u{1F900}-\u{1F9FF}]|[\u{1FA70}-\u{1FAFF}]/gu, '')
                // Remove common symbols and special characters
                .replace(/[ğŸ—£ğŸ‘¥ğŸ¤–ğŸ§ğŸ®ğŸ“–ğŸ“Šâœ…âŒğŸ“§ğŸ’¡ğŸ”ğŸ“ğŸ¯ğŸš€ğŸ’»ğŸ“±ğŸŒğŸ”’ğŸ›¡ï¸âš¡ğŸ¨ğŸ­ğŸªğŸ¨ğŸ¬ğŸµğŸ¶ğŸ¸ğŸ¹ğŸºğŸ»ğŸ¥ğŸ¤ğŸ§ğŸ®ğŸ•¹ï¸ğŸ²ğŸ¯ğŸ³ğŸ°ğŸ±ğŸ®ğŸ¯ğŸ²ğŸ³ğŸ°ğŸ±]/g, '')
                // Remove other common symbols that shouldn't be spoken
                .replace(/[â€¢Â·â–ªâ–«â€£âƒâŒâââââ‘â’â“â”â•â–â—â˜â™âšâ›âœââ]/g, '')
                // Remove arrows and directional symbols
                .replace(/[â†â†’â†‘â†“â†”â†•â†–â†—â†˜â†™â†šâ†›â†œâ†â†â†Ÿâ† â†¡â†¢â†£â†¤â†¥â†¦â†§â†¨â†©â†ªâ†«â†¬â†­â†®â†¯â†°â†±â†²â†³â†´â†µâ†¶â†·â†¸â†¹â†ºâ†»â†¼â†½â†¾â†¿â‡€â‡â‡‚â‡ƒâ‡„â‡…â‡†â‡‡â‡ˆâ‡‰â‡Šâ‡‹â‡Œâ‡â‡â‡â‡â‡‘â‡’â‡“â‡”â‡•â‡–â‡—â‡˜â‡™â‡šâ‡›â‡œâ‡â‡â‡Ÿâ‡ â‡¡â‡¢â‡£â‡¤â‡¥â‡¦â‡§â‡¨â‡©â‡ªâ‡«â‡¬â‡­â‡®â‡¯â‡°â‡±â‡²â‡³â‡´â‡µâ‡¶â‡·â‡¸â‡¹â‡ºâ‡»â‡¼â‡½â‡¾â‡¿]/g, '')
                // Remove mathematical and technical symbols
                .replace(/[âˆ‘âˆâˆâˆ†âˆ‡âˆâˆâˆŸâˆ âˆ¡âˆ¢âˆ£âˆ¤âˆ¦âˆ¨âˆ§âˆ©âˆªâˆ«âˆ®âˆ¯âˆ°âˆ±âˆ²âˆ³âˆ´âˆµâˆ¶âˆ·âˆ¸âˆ¹âˆºâˆ»âˆ¼âˆ½âˆ¾âˆ¿â‰€â‰â‰‚â‰ƒâ‰„â‰…â‰†â‰‡â‰ˆâ‰‰â‰Šâ‰‹â‰Œâ‰â‰â‰â‰â‰‘â‰’â‰“â‰”â‰•â‰–â‰—â‰˜â‰™â‰šâ‰›â‰œâ‰â‰â‰Ÿâ‰ â‰¡â‰¢â‰£â‰¤â‰¥â‰¦â‰§â‰¨â‰©â‰ªâ‰«â‰¬â‰­â‰®â‰¯â‰°â‰±â‰²â‰³â‰´â‰µâ‰¶â‰·â‰¸â‰¹â‰ºâ‰»â‰¼â‰½â‰¾â‰¿]/g, '')
                // Remove currency and other symbols
                .replace(/[Â¢Â£Â¤Â¥Â¦Â§Â¨Â©ÂªÂ«Â¬Â­Â®Â¯Â°Â±Â²Â³Â´ÂµÂ¶Â·Â¸Â¹ÂºÂ»Â¼Â½Â¾Â¿Ã€ÃÃ‚ÃƒÃ„Ã…Ã†Ã‡ÃˆÃ‰ÃŠÃ‹ÃŒÃÃÃÃÃ‘Ã’Ã“Ã”Ã•Ã–Ã—Ã˜Ã™ÃšÃ›ÃœÃÃÃŸÃ Ã¡Ã¢Ã£Ã¤Ã¥Ã¦Ã§Ã¨Ã©ÃªÃ«Ã¬Ã­Ã®Ã¯Ã°Ã±Ã²Ã³Ã´ÃµÃ¶Ã·Ã¸Ã¹ÃºÃ»Ã¼Ã½Ã¾Ã¿]/g, '')
                // Keep only letters, numbers, basic punctuation, and spaces
                .replace(/[^a-zA-Z0-9\s.,!?;:'"()-]/g, '')
                // Clean up multiple spaces
                .replace(/\s+/g, ' ')
                // Trim whitespace
                .trim();
        }

        function testFiltering(originalText, elementId) {
            const cleaned = cleanTextForSpeech(originalText);
            document.getElementById(elementId).innerHTML = '<strong>Cleaned:</strong> ' + cleaned;
        }

        function speakText(text) {
            if ('speechSynthesis' in window) {
                const utterance = new SpeechSynthesisUtterance(text);
                speechSynthesis.speak(utterance);
            } else {
                alert('Speech synthesis not supported in this browser');
            }
        }
    </script>
</body>
</html>
